<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Blue Agent - Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

<header class="topbar">
  <div class="row">
    <div class="title">BLUE AGENT <span style="color:var(--accent); font-size:10px;">PRO</span></div>
    <button id="info-btn" class="icon-btn" style="margin-left:8px; font-size:14px; opacity:0.7">?</button>
  </div>
  
  <div class="counts">
    <div class="countbox" id="rc-box"><div class="label">RC</div><div id="rc" class="value">0</div></div>
    <div class="countbox" id="tc-box"><div class="label">TC</div><div id="tc" class="value">0.0</div></div>
    <div class="countbox highlight"><div class="label">BET</div><div id="bet-val" class="value">$10</div></div>
  </div>
  <button id="settings-toggle" class="icon-btn">⚙️</button>
</header>

<main class="wrap">
  <div id="advice-panel" class="advice-hero waiting">
    <div class="advice-top-row">
      <div class="advice-label">STRATEGIC ACTION</div>
      <div class="advice-deviation-mark" title="Deviation from Basic Strategy">⚠ DEV</div>
    </div>
    
    <div id="advice-text" class="advice-main">WAITING</div>
    
    <div class="context-box">
      <div id="advice-sub" class="advice-sub">Deal cards to begin analysis...</div>
    </div>
  </div>

  <div class="panel tight">
    <div class="tag-row">
      <button id="tag-player" class="tag-btn active" title="Key: P">PLAYER</button>
      <button id="tag-dealer" class="tag-btn" title="Key: D">DEALER</button>
      <button id="tag-table" class="tag-btn" title="Key: T">DISCARD</button>
    </div>
  </div>

  <div class="panel">
    <div class="row space">
      <div style="width: 45%;">
        <div class="label">DEALER</div>
        <div id="dealer-card" class="card-display">—</div>
      </div>
      <div style="width: 45%; text-align:right">
        <div class="label">PLAYER</div>
        <div id="player-hand" class="card-display" style="color:var(--accent)">—</div>
      </div>
    </div>
  </div>

  <div class="panel">
    <div class="pad">
      <button class="cardbtn" data-card="7">7</button>
      <button class="cardbtn" data-card="8">8</button>
      <button class="cardbtn" data-card="9">9</button>
      <button class="cardbtn" data-card="4">4</button>
      <button class="cardbtn" data-card="5">5</button>
      <button class="cardbtn" data-card="6">6</button>
      <button class="cardbtn" data-card="1">A</button>
      <button class="cardbtn" data-card="2">2</button>
      <button class="cardbtn" data-card="3">3</button>
      <button class="cardbtn zero" data-card="T">10 / FACE</button>
    </div>
  </div>

  <div class="row" style="margin-top: 10px;">
    <button id="undo-btn" class="secondary-btn" title="Backspace">↶ UNDO</button>
    <button id="reset-btn" class="reset-btn" title="Key: R">NEW ROUND</button>
  </div>

  <div class="panel log-panel">
    <div class="label">SESSION LOG</div>
    <div id="activity-log" class="log-container">
      <div class="log-entry">Session started...</div>
    </div>
  </div>
</main>

<div id="settings-modal" class="modal hidden">
  <div class="modal-content">
    <h3>Configuration</h3>
    <label><span>Decks:</span> <input type="number" id="cfg-decks" value="6" min="1" max="8"></label>
    <label><span>Min Bet:</span> <input type="number" id="cfg-min" value="10"></label>
    <button id="save-settings" class="action-btn">SAVE</button>
    <button id="close-settings" class="secondary-btn" style="margin-top:8px">CLOSE</button>
  </div>
</div>

<div id="info-modal" class="modal hidden">
  <div class="modal-content wide">
    <h3>Metric Definitions</h3>
    
    <div class="info-block">
      <h4>RC (Running Count)</h4>
      <p>The raw sum of cards seen so far using the <b>Hi-Lo</b> system.</p>
      <ul>
        <li><span style="color:var(--green)">2, 3, 4, 5, 6</span> = <b>+1</b> (Good for Player)</li>
        <li><span style="color:var(--muted)">7, 8, 9</span> = <b>0</b> (Neutral)</li>
        <li><span style="color:var(--red)">10, J, Q, K, A</span> = <b>-1</b> (Bad for Player)</li>
      </ul>
    </div>

    <div class="info-block">
      <h4>TC (True Count)</h4>
      <p>The definitive metric for betting and strategy.</p>
      <div class="formula">TC = RC ÷ Decks Remaining</div>
      <p>A high TC (e.g., +3) means the remaining deck is rich in 10s and Aces, increasing the chance of Blackjacks and dealer busts.</p>
    </div>

    <button id="close-info" class="action-btn">GOT IT</button>
  </div>
</div>

<script type="module" src="./app.js"></script>
</body>
</html>
