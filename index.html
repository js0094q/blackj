<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Blackj | Trainer</title>
  <link rel="stylesheet" href="./styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <header class="topbar">
    <div class="row">
      <div class="title">BLACKJ <span class="tiny-badge">TRAINER</span></div>
    </div>

    <div class="counts">
      <div class="countbox"><div class="label">RC</div><div id="rc-val" class="value">0</div></div>
      <div class="countbox highlight"><div class="label">TC</div><div id="tc-val" class="value">0.0</div></div>
      <div class="countbox"><div class="label">Decks</div><div id="decks-left" class="value">6.0</div></div>
    </div>
  </header>

  <div class="hero">
    <span id="advice-tag" class="advice-tag">Ready</span>
    <div id="advice-action" class="advice-action">---</div>
    <div id="advice-reason" class="advice-reason">Enter dealer up-card to start</div>
  </div>

  <div class="micro-help">
    Log decisions with H/S/D/P/R/I. Toggle modes: G (dealer), L (player), V (table). Other: U (undo), X (reset), M (auto-next).
  </div>

  <div class="game-state">
    <div id="slot-dealer" class="slot active">
      <div class="slot-label">Dealer Up</div>
      <div id="disp-dealer" class="slot-cards"><span class="empty-text">?</span></div>
    </div>
    <div id="slot-player" class="slot">
      <div class="slot-label">Your Hand</div>
      <div id="disp-player" class="slot-cards"><span class="empty-text">--</span></div>
    </div>
  </div>

  <div class="analytics">
    <div class="chart-wrap"><canvas id="accChart"></canvas></div>
  </div>

  <footer class="controls">
    <div class="mode-switch">
      <button id="mode-dealer" class="mode-btn active">DEALER [G]</button>
      <button id="mode-player" class="mode-btn">PLAYER [L]</button>
      <button id="mode-table" class="mode-btn">TABLE [V]</button>
    </div>

    <div class="keypad">
      <button class="key" data-val="2">2</button>
      <button class="key" data-val="3">3</button>
      <button class="key" data-val="4">4</button>
      <button class="key" data-val="5">5</button>
      <button class="key" data-val="6">6</button>
      <button class="key" data-val="7">7</button>
      <button class="key" data-val="8">8</button>
      <button class="key" data-val="9">9</button>
      <button class="key" data-val="T">10</button>
      <button class="key ace" data-val="A">A</button>
    </div>

    <div class="action-row">
      <button id="undo" class="btn-undo">UNDO [U]</button>
      <button id="next" class="btn-next">NEXT HAND [SPC]</button>
      <button id="reset-shoe" class="btn-reset">RESET [X]</button>
    </div>
  </footer>

  <!-- Subtle key map watermark (centered) -->
  <div id="keymap-watermark" class="keymap-watermark">
    Cards: 2â€“9/T/A &nbsp;|&nbsp; Dealer: G &nbsp;|&nbsp; Player: L &nbsp;|&nbsp; Decisions: H/S/D/P/R/I &nbsp;|&nbsp; Undo: U &nbsp;|&nbsp; Reset: X &nbsp;|&nbsp; Table: V &nbsp;|&nbsp; Auto-Next: M
  </div>

  <div id="tableOverlay" class="overlay" role="dialog" aria-label="Table view" aria-modal="false">
    <div class="overlay-inner">
      <div class="overlay-head">
        <div class="overlay-title">TABLE VIEW</div>
        <button id="ov-close" class="overlay-close" type="button">Close [Esc]</button>
      </div>

      <div class="overlay-grid">
        <section class="ov-card">
          <div class="ov-card-title">Current</div>
          <div id="ov-summary" class="ov-block"></div>
        </section>

        <section class="ov-card">
          <div class="ov-card-title">Deviations</div>
          <div id="ov-deviations" class="ov-block"></div>
        </section>

        <section class="ov-card">
          <div class="ov-card-title">Session</div>
          <div id="ov-stats" class="ov-block"></div>
        </section>

        <section class="ov-card ov-log">
          <div class="ov-card-title">Hand Log (latest first)</div>
          <div class="ov-table-wrap">
            <table class="ov-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Up</th>
                  <th>Hand</th>
                  <th>TC</th>
                  <th>Rec</th>
                  <th>You</th>
                  <th>OK</th>
                </tr>
              </thead>
              <tbody id="ov-log-body"></tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
